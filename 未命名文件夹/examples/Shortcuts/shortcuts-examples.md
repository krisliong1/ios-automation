# 快捷指令示例

本文档包含常用的快捷指令配置示例。

## 目录

1. [快速添加任务](#1-快速添加任务)
2. [每日任务播报](#2-每日任务播报)
3. [通过 URL Scheme 添加任务](#3-通过-url-scheme-添加任务)
4. [批量完成任务](#4-批量完成任务)
5. [任务统计报告](#5-任务统计报告)

---

## 1. 快速添加任务

**描述**: 快速输入任务标题并添加到列表

**触发方式**: 手动运行或 Siri "快速添加任务"

**步骤**:
```
1. [询问输入]
   提示: "输入任务内容"
   输入类型: 文本
   默认答案: (空)

2. [询问输入]
   提示: "优先级？"
   输入类型: 从菜单中选择
   菜单: 低, 普通, 高, 紧急
   默认答案: 普通

3. [询问]
   提示: "是否设置截止日期？"
   输入类型: 日期和时间
   允许无响应: 是

4. [添加任务] AutomationHelper
   任务标题: [步骤1的输入]
   优先级: [步骤2的选择]
   截止日期: [步骤3的日期]

5. [显示通知]
   标题: "✅ 任务已添加"
   正文: [步骤1的输入]
   播放声音: 是
```

**Siri 使用**:
- "嘿 Siri，快速添加任务"
- 输入任务内容
- 选择优先级
- 完成！

---

## 2. 每日任务播报

**描述**: 每天早上播报今日任务

**触发方式**: 自动化 - 每天 8:00

**自动化配置**:
```
触发器: 时间
时间: 每天 8:00
立即运行: 是
运行前通知: 否
```

**步骤**:
```
1. [获取今日任务] AutomationHelper
   只显示重要任务: 否
   最多显示数量: 10
   包含已完成: 否

2. [如果] [快捷指令输入] 有任何值

   3. [文本]
      早安！今日任务:

      [快捷指令输入]

      加油！💪

   4. [朗读文本]
      文本: [步骤3的文本]
      语速: 1.0
      音调: 1.0
      等待完成: 是

   5. [显示通知]
      标题: "☀️ 早安播报"
      正文: [步骤3的文本]

[否则]

   6. [朗读文本]
      文本: "早安！今天没有待办任务，好好享受一天吧！"

[结束如果]
```

---

## 3. 通过 URL Scheme 添加任务

**描述**: 使用 URL Scheme 快速添加任务（不依赖 App Intents）

**步骤**:
```
1. [询问输入]
   提示: "输入任务内容"
   输入类型: 文本

2. [URL 编码]
   文本: [步骤1的输入]

3. [文本]
   automationhelper://addTask?title=[步骤2的编码结果]&priority=普通

4. [打开 URL]
   URL: [步骤3的文本]

5. [等待] 1 秒

6. [显示通知]
   标题: "任务已添加"
   正文: [步骤1的输入]
```

**进阶版（带更多参数）**:
```
1. [询问输入] "任务标题"
   → 变量: taskTitle

2. [询问] "优先级"
   选项: 低, 普通, 高, 紧急
   → 变量: priority

3. [询问] "截止日期"
   类型: 日期和时间
   允许无响应: 是
   → 变量: dueDate

4. [URL 编码] taskTitle
   → 变量: encodedTitle

5. [文本]
   automationhelper://addTask?title=[encodedTitle]&priority=[priority]

6. [如果] dueDate 有任何值

   7. [获取] dueDate 的 时间戳
      → 变量: timestamp

   8. [文本]
      [步骤5的文本]&dueDate=[timestamp]
      → 变量: finalURL

[否则]

   9. [设置变量] finalURL = [步骤5的文本]

[结束如果]

10. [打开 URL] finalURL
```

---

## 4. 批量完成任务

**描述**: 选择多个任务并批量标记为完成

**步骤**:
```
1. [获取今日任务] AutomationHelper
   包含已完成: 否

2. [从列表中选择]
   提示: "选择要完成的任务"
   列表: [步骤1的任务]
   允许多选: 是

3. [重复操作] 对于 [步骤2的选择] 中的每个项目

   4. [完成任务] AutomationHelper
      任务: [重复项目]

[结束重复]

5. [获取] [步骤2的选择] 的 项目数
   → 变量: completedCount

6. [显示通知]
   标题: "🎉 任务已完成"
   正文: "已完成 [completedCount] 个任务"
```

---

## 5. 任务统计报告

**描述**: 生成每周任务统计报告并发送邮件

**触发方式**: 自动化 - 每周日 20:00

**步骤**:
```
1. [任务统计] AutomationHelper

2. [获取当前日期]

3. [格式化日期]
   日期: [步骤2的日期]
   格式: yyyy年MM月dd日

4. [文本]
   📊 本周任务统计报告

   统计日期: [步骤3的格式化日期]

   [步骤1的统计结果]

   ---

   继续加油！下周见！💪

5. [发送邮件]
   收件人: me@example.com
   主题: "任务统计 - [步骤3的格式化日期]"
   正文: [步骤4的文本]

6. [显示通知]
   标题: "📧 报告已发送"
   正文: "每周统计报告已发送到邮箱"
```

---

## 使用 URL Scheme 的快捷指令模板

### 模板 1: 添加任务

```
automationhelper://addTask?title={任务标题}&priority={优先级}&tags={标签1,标签2}
```

**参数说明**:
- `title`: 任务标题（必需，需要 URL 编码）
- `priority`: 优先级（可选：低/普通/高/紧急）
- `dueDate`: 截止时间戳（可选）
- `tags`: 标签，逗号分隔（可选）
- `notes`: 备注（可选，需要 URL 编码）

**示例**:
```
automationhelper://addTask?title=%E4%B9%B0%E8%8F%9C&priority=普通&tags=生活,购物
```
（"买菜"经过 URL 编码）

### 模板 2: 完成任务

```
automationhelper://completeTask?id={任务UUID}
```

### 模板 3: 删除任务

```
automationhelper://deleteTask?id={任务UUID}
```

### 模板 4: 获取任务列表

```
automationhelper://getTasks?limit={数量}&onlyIncomplete={true/false}
```

---

## 高级技巧

### 技巧 1: 使用变量重复利用

在快捷指令中使用变量可以让逻辑更清晰：

```
1. [询问输入] → taskTitle
2. [询问] → priority
3. [URL 编码] taskTitle → encodedTitle
4. [文本] automationhelper://addTask?title=[encodedTitle]&priority=[priority] → url
5. [打开 URL] url
```

### 技巧 2: 错误处理

添加错误处理确保快捷指令稳定运行：

```
1. [尝试]

   2. [添加任务] AutomationHelper
      ...

   3. [显示通知] "成功"

[捕获错误]

   4. [显示通知]
      标题: "操作失败"
      正文: 错误详情

[结束尝试]
```

### 技巧 3: 条件判断

根据不同条件执行不同操作：

```
1. [获取当前日期]

2. [格式化日期] 格式: EEEE

3. [如果] [步骤2] 是 "星期六" 或 "星期日"

   4. [朗读] "今天是休息日，好好放松吧！"

[否则]

   5. [获取今日任务]
   6. [朗读] 任务列表

[结束如果]
```

---

## 调试技巧

### 显示中间结果

在调试时，在关键步骤后添加：

```
[显示通知]
标题: "调试 - 步骤X"
正文: [变量的值]

[暂停] 3 秒
```

### 日志记录

将运行日志保存到文件：

```
[文本]
[当前时间] - 快捷指令运行
步骤1: [变量1]
步骤2: [变量2]

[追加到文件]
文件: iCloud Drive/Shortcuts/debug.log
```

---

## 快捷指令图标和颜色推荐

- **任务管理**: 🎯 蓝色
- **提醒播报**: 📢 橙色
- **统计报告**: 📊 紫色
- **自动化**: 🤖 绿色
- **紧急任务**: 🚨 红色

---

## 分享你的快捷指令

1. 打开快捷指令
2. 点击右上角 "..."
3. 选择 "共享"
4. "拷贝 iCloud 链接"

⚠️ **分享前请检查**:
- 删除个人信息（邮箱、API密钥等）
- 添加使用说明
- 测试在其他设备上是否正常工作

---

**更多示例正在更新中...**
